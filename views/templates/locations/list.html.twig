{% extends "layout.html.twig" %}

{% block title %}{{ parent() }} - {{ L('location_LOCATIONS') }}{% endblock %}
{% block header_title %}{{ L('location_LOCATIONS') }}{% endblock %}
{% block header_description %}{% endblock %}
{% block body %}
    {{ getHTMLSessionInfo() | raw }}

    <div class="box">
        <div class="box-header">
            <h3 class="box-title">{{ L('location_LOCATIONS') }}</h3>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
            <div id="tree"></div>
        </div>
    </div>

    <div class="modal fade" id="locationModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Emplacement</h4>
                </div>
                <div class="modal-body">
                    <form method="POST">
                        <input type="hidden" name="id" value="">
                        <div class="form-group">
                            <label for="name">Nom de l'emplacement</label>
                            <input type="text" class="form-control" name="name" id="name" value="">
                        </div>
                        <div class="form-group">
                            <label for="name">Emplacement parent</label>
                            <select name="parent" id="parent" class="form-control">
                                {% for location in locationsList %}
                                    <option value="{{ location.id }}">{{ location.text }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary">Sauvegarder</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <script>
        $(function() {
            $('#tree').treeview({data: {{ locations | raw }}});

            $('#parent').selectize();
        });
    </script>

{% endblock %}